name: bump versions
on:
  workflow_dispatch:
  schedule:
    - cron: '0 6 * * 1'  # "At 06:00 on Monday."

jobs:
  bump-versions:
    name: Bump versions
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - run: pipx run nox -s pc_bump
      env:
        GITHUB_API_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    - run: pipx run nox -s gha_bump
    - run: git diff
    - uses: peter-evans/create-pull-request@v3
      with:
        title: "chore: bump versions"
        body: |
          Update the versions mentioned in the docs pages.

          PR generated by "Update dependencies" [workflow](https://github.com/${{github.repository}}/actions/runs/${{github.run_id}}).
        delete-branch: true
