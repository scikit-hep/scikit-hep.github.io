
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Error Bars &#8212; Scikit-HEP 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="../../static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../static/scikit-hep.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../static/mathjax_conf.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="FAQ" href="../../faq.html" />
    <link rel="prev" title="Data Visualization Examples" href="ex_visual.html" />
   
  <link rel="stylesheet" href="../../static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../static/logo.svg" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=scikit-hep&repo=scikit-hep&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Get help</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../documentation.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../api/api.html">API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../resources.html">Miscellaneous resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../affiliations.html">Affiliated packages</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../../documentation.html">Documentation</a><ul>
  <li><a href="../examples.html">Examples</a><ul>
  <li><a href="ex_visual.html">Data Visualization Examples</a><ul>
      <li>Previous: <a href="ex_visual.html" title="previous chapter">Data Visualization Examples</a></li>
      <li>Next: <a href="../../faq.html" title="next chapter">FAQ</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="section" id="Error-Bars">
<h1>Error Bars<a class="headerlink" href="#Error-Bars" title="Permalink to this headline">¶</a></h1>
<p>It is common practice in High Energy Physics (and other fields) to
display error bars for each histogram bin, corresponding to either the
associated statistical or systematic errors. While the interpretation
and meaning of the aforementioned error bars is a point of constant
contention (<a class="reference external" href="http://www.science20.com/quantum_diaries_survivor/those_deceiving_error_bars-85735">Those Deceiving Error
Bars</a>),
the entries in a histogram bin are typically seen as drawn from a
Poisson distribution, and thus the standard deviation for a bin with
<span class="math">\(N\)</span> entries is <span class="math">\(\sqrt{N}\)</span>.</p>
<div class="section" id="Error-Bar-Calculation">
<h2>Error Bar Calculation<a class="headerlink" href="#Error-Bar-Calculation" title="Permalink to this headline">¶</a></h2>
<p>Let us produce a simple histogram with error bars.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>import numpy as np
from skhep.visual import MplPlotter as skh_plt
%matplotlib inline
plt.rcParams[&#39;figure.figsize&#39;] = (8,6)

np.random.seed(1001)
data = np.random.normal(size=1000)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>_ = skh_plt.hist(data, bins=20, errorbars=True)
plt.title(&#39;Simple Error Bar Example&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[2]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x10f085d68&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_3_1.png" src="../../images/examples_visual_errorbars_3_1.png" />
</div>
</div>
<p>By default, when no weights are given, the error bars are calculated as
<span class="math">\(\pm\sqrt{N}\)</span> above and below the bin height. This is equivalent
to using the argument <code class="docutils literal"><span class="pre">err_type='gaussian'</span></code> when calling the <code class="docutils literal"><span class="pre">hist</span></code>
function. If weights are included with the input data, then the default
error bars are calculated as the root of the sum the square of the
weights. This is equivalent to declaring `err_type=&#8217;sumW2&#8217;.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>w = np.random.uniform(0.1, 0.2, size=1000)
_ = skh_plt.hist(data, bins=20, weights=w, errorbars=True)
plt.title(&#39;Error Bars for Weighted Histogram, SumW2&#39;)
plt.figure()
_ = skh_plt.hist(data, bins=20, weights=w, errorbars=True, err_type=&#39;gaussian&#39;)
plt.title(&#39;Error Bars for Weighted Histogram, sqrt(N)&#39;)

</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[3]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x10f24af98&gt;
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_5_1.png" src="../../images/examples_visual_errorbars_5_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_5_2.png" src="../../images/examples_visual_errorbars_5_2.png" />
</div>
</div>
</div>
<div class="section" id="Error-Bar-Display">
<h2>Error Bar Display<a class="headerlink" href="#Error-Bar-Display" title="Permalink to this headline">¶</a></h2>
<p>There are currently two styles for displaying error bars,
<code class="docutils literal"><span class="pre">err_style='band'</span></code> and <code class="docutils literal"><span class="pre">err_style='line'</span></code>. By default, the <code class="docutils literal"><span class="pre">band</span></code>
style is used for filled histograms, while the <code class="docutils literal"><span class="pre">line</span></code> style is used
for step and marker histograms.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>data2 = np.random.normal(1,1, size=1000)
data3 = np.random.normal(-1,1, size=1000)

_ = skh_plt.hist(data, bins=20, errorbars=True)
_ = skh_plt.hist(data2, bins=20, errorbars=True, histtype=&#39;step&#39;)
_ = skh_plt.hist(data3, bins=20, errorbars=True, histtype=&#39;marker&#39;)
plt.title(&#39;Various Histogram and Error Bar Draw Styles&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[4]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x10f43fe10&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_8_1.png" src="../../images/examples_visual_errorbars_8_1.png" />
</div>
</div>
<p>Error bar color is handled automatically by default
(<code class="docutils literal"><span class="pre">err_color='auto'</span></code>). For a non-stacked histogram, the error bar color
is selected to be a slightly darker version of the main histogram color.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>_ = skh_plt.hist(data3, bins=20, errorbars=True, color=&#39;C6&#39;, label=&#39;auto color&#39;)
_ = skh_plt.hist(data2, bins=20, errorbars=True, color=&#39;C8&#39;, err_color=&#39;C9&#39;, label=&#39;specified color&#39;)
plt.xlim(-4,8)
plt.title(&#39;Color Options&#39;)
plt.legend()
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[5]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.legend.Legend at 0x10f314d68&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_10_1.png" src="../../images/examples_visual_errorbars_10_1.png" />
</div>
</div>
</div>
<div class="section" id="Stacked-Histograms">
<h2>Stacked Histograms<a class="headerlink" href="#Stacked-Histograms" title="Permalink to this headline">¶</a></h2>
<p>For stacked histograms, the error bars are determined by the sum of all
contributions for an individual bin, and placed around the total bin
height. If the color mode is automatic, the error bar color is chosen to
be the next in the current color cycle, instead of being a modified
version of the currently displayed colors.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>_ = skh_plt.hist([data3, data2], bins=20, errorbars=True)
plt.title(&#39;Unstacked&#39;)
plt.figure()
_ = skh_plt.hist([data3, data2], bins=20, errorbars=True, stacked = True)
plt.title(&#39;Stacked&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[6]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x10f7424e0&gt;
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_13_1.png" src="../../images/examples_visual_errorbars_13_1.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_13_2.png" src="../../images/examples_visual_errorbars_13_2.png" />
</div>
</div>
</div>
<div class="section" id="Scale-and-Normalization">
<h2>Scale and Normalization<a class="headerlink" href="#Scale-and-Normalization" title="Permalink to this headline">¶</a></h2>
<p>If scale and/or normalization is applied to the histogram, the error
bars are scaled appropriately as well.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span>_ = skh_plt.hist(data2, bins=20, errorbars=True, histtype=&#39;step&#39;, scale=0.5)
_ = skh_plt.hist(data2, bins=20, errorbars=True, histtype=&#39;step&#39;)

plt.title(&#39;Histogram and scaled histogram&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>Out[7]:
</pre></div>
</div>
<div class="output_area highlight-none"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x10fa57748&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../images/examples_visual_errorbars_16_1.png" src="../../images/examples_visual_errorbars_16_1.png" />
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2016-2017, The Scikit-HEP Developers.
      
      |
      <a href="../../sources/examples/visual/errorbars.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/scikit-hep/scikit-hep" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>